---
tags:
  - MySQL/约束
  - 内容
aliases: []
日月: 2024-11-24
时分: 20:46
---
# 码的概念

在关系型数据库中，**码**是一个或多个字段的集合，用于唯一标识表中的实体。

1. **超码**  
    表中可以唯一标识实体的字段集合，称为**超码**。
    
2. **候选码**  
    超码中，**能够确定唯一性的最小字段集合**称为**候选码**。
    
3. **主键**  
    在候选码中选择一个用来标识实例的字段集合，称为[[数据库/MySQL/约束/主键约束（Primary Key Constraint）|主键]]。

## 示例说明

以 **学生表** 为例，假设表中有以下字段：

- 学号
- 身份证号
- 姓名
- 年龄
- 性别
- 电话

### 码分析：

1. **超码**（能够唯一标识表中所有记录的字段组合）：
    
    - **{学号}**：学号是表中唯一标识学生的字段，能够唯一确定每个学生，所以它是超码。
    - **{身份证号}**：身份证号在学生中也是唯一的，因此它也能够唯一标识每一行数据，属于超码。
    - **{电话}**：虽然电话号码在大多数情况下是唯一的，但它可能存在重复情况，但假设无重复它也是超码。
    - **{学号, 姓名}**：学号和姓名的组合也能唯一标识每个学生，因此它是超码。虽然学号就足够唯一，但组合也是有效的超码。
    - **{学号, 姓名, 年龄}**：这个组合可以唯一标识每个学生，尽管学号就足够，但这个组合也能作为超码，能确定唯一记录。
    - **{学号，身份证号}**、**{姓名，身份证号}**、**{姓名、电话}**……
    - 
2. **候选码**（能够唯一标识记录的最小字段集合）：
    
    - **{学号}**：学号能唯一标识学生，且不需要其他字段就能唯一确定记录，因此它是候选码。
    - **{身份证号}**：身份证号也能唯一标识学生，且不需要其他字段，因此它是候选码。
3. **主键**（候选码中选出的唯一标识记录的字段）：
    
    - **{学号}**：学号被选为主键，因为它能够唯一标识每个学生，并且在实际应用中学号更适合用作标识字段，所以它是主键。

**注**：主键是候选码中选择的一个，通常根据业务需求选取最合适的字段。在本例中，学号作为主键是最常见且最合适的选择。

---
# 为什么要讲“码”

在讲解 **约束** 时提到 **码的概念**，主要是因为约束的核心目标之一是 **确保数据的唯一性和完整性**，而这些特性与码的定义密切相关。以下是具体原因：

### 1. **主键约束与码的关系**

- **主键约束（PRIMARY KEY）** 是约束中最常见的一种，用于唯一标识表中的每一行数据。
- **主键**来源于候选码，而候选码是通过分析超码得出的最小唯一字段集合。
- ==理解码的概念，有助于清楚为什么主键必须是唯一的，为什么候选码需要满足唯一性和最小性等特性。==

---

### 2. **规范化与字段设计的基础**

- 数据库设计过程中，常常需要确定哪些字段可以构成超码、候选码、主键。
- 知道 **码的概念**，可以更有逻辑地设计表结构，避免数据冗余和异常（如插入、更新、删除时引发的冲突）。

---

### 3. **支持其他约束的理解**

- **唯一约束（UNIQUE）**：本质上可以看作非主键的候选码的实现。
- **外键约束（FOREIGN KEY）**：外键通常参照的是其他表的主键或唯一字段，而这些字段来源于候选码。
- 理解码的概念可以帮助开发者合理设置这些约束，确保数据的完整性和一致性。

---

### 4. **提高业务语义的理解能力**

- 在具体业务场景中，确定哪些字段是候选码（比如学号、身份证号）有助于更准确地满足业务需求。
- 知道如何区分超码、候选码和主键，可以帮助开发者为特定的业务场景选择最合适的约束。

---

### 示例说明

假设有一张 **学生表**：

```text
字段：学号、身份证号、姓名、性别、年龄、电话
```

分析：

- 超码：{学号}、{身份证号}、{电话}、{学号 + 姓名} 等。
- 候选码：{学号} 和 {身份证号}。
- 主键：{学号}（业务上更容易作为主键）。

通过 **码的分析**，可以理解为什么要给 "学号" 设置主键约束，以及 "身份证号" 可以设置唯一约束等。

---

总结：讲解约束时提到 **码的概念** 是为了帮助理解 **唯一性和最小性** 的逻辑来源，这不仅是主键约束的核心，也是数据库设计和管理中的重要知识基础。