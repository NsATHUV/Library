---
tags:
  - 内容
aliases:
  - 访问指针变量
---
使用指针时会频繁进行以下几个操作：定义一个指针变量、把变量地址赋值给指针、访问指针变量中可用地址的值。这些是通过使用一元运算符 `*` 来返回位于操作数所指定地址的变量的值。
下面的实例涉及到了这些操作：
```C
#include <stdio.h>
 
int main ()
{
   int  var = 20;   /* 实际变量的声明 */
   int  *ip;        /* 指针变量的声明 */
 
   ip = &var;  /* 在指针变量中存储 var 的地址 */
 
   printf("var 变量的地址: %p\n", &var  );
 
   /* 在指针变量中存储的地址 */
   printf("ip 变量存储的地址: %p\n", ip );
 
   /* 使用指针访问值 */
   printf("*ip 变量的值: %d\n", *ip );
 
   return 0;
}
```

当上面的代码被编译和执行时，它会产生下列结果：
```C
var 变量的地址: 0x7ffeeef168d8 //每一台设备的运行结果都不可能相同，每一次运行时也不能保证相同。
ip 变量存储的地址: 0x7ffeeef168d8
*ip 变量的值: 20
```
> 每一台设备的运行结果都大概率不相同，同一台设备每一次运行时也不能保证相同。

## 为指针变量赋值
指针变量通常要指向一个变量，否则其值将可能没有意义。
在将一个变量的地址赋值给一个指针变量时，需要使用到 `&` 符号。
`&` 是一个运算符，称为[[C语言笔记/运算符/优先级和结合性#运算符功能|赋值运算符]]。
```C
int  var = 20;   /* 实际变量的声明 */
int  *ip;        /* 指针变量的声明 */
ip = &var;  /* 在指针变量中存储 var 的地址 */
```

## 访问指针变量的两种情况

访问指针变量属于比较绕的知识。涉及访问操作时，可能有以下两种情况。
### 访问指针变量 
在访问指针变量时如果不使用 `*`，则访问的是`指针变量本身`，即一个地址。
```C
int  *ip;        /* 指针变量的声明 */
printf("ip 变量存储的地址: %p\n", ip );
```
这种方法是输出指针变量：`ip`本身。
输出指针可使用[[C语言笔记/函数/库函数#格式符与变量类型对照表|格式符]]`%p`。
### 访问指针变量指向的值
在访问指针变量时使用`*`，则访问的是其存储的地址指向的值。
```C
int  *ip;        /* 指针变量的声明 */
printf("*ip 变量的值: %d\n", *ip );
```
这种方法是输出指针变量存储的地址中存储的值，而非一个地址，非指针变量`ip`本身。

## 取值运算符

`*`在定义指针变量时，只是用来声明指针变量的。
而在访问指针变量时，`*`是取值运算符。