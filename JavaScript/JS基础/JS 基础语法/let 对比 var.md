---
tags:
  - JavaScript
  - 内容
  - 补充
aliases: 
日月: 2024-11-28
时分: 16:25
---
### **`let` 和 `var` 的对比**

`let` 和 `var` 都是用于声明变量的关键字，但它们在作用域、[[JavaScript/JS基础/JS 基础语法/提升|提升]]、重复声明等方面有显著的不同。下面从多个维度对两者进行详细对比。

---

### **1. 作用域**

#### **`var`：函数作用域**

- `var` 声明的变量在函数内部有效，离开函数作用域后无效。
- 如果在代码块 `{}` 内声明，变量会泄漏到函数或全局作用域。

```javascript
if (true) {
    var a = 10;
}
console.log(a); // 输出 10，变量泄漏到全局作用域
```

#### **`let`：块级作用域**

- `let` 声明的变量只在 `{}` 代码块内有效。
- 不会泄漏到代码块之外。

```javascript
if (true) {
    let b = 20;
}
// console.log(b); // 报错：b 未定义
```

---

### **2. 变量提升**

#### **`var`：变量[[JavaScript/JS基础/JS 基础语法/提升|提升]]，初始化为 `undefined`**

- `var` 声明的变量会被[[JavaScript/JS基础/JS 基础语法/提升|提升]]到作用域顶部。
- 即使变量声明写在后面，也可以在声明前访问，但值为 `undefined`。

```javascript
console.log(c); // 输出 undefined（提升了声明，但未赋值）
var c = 30;
```

#### **`let`：变量提升，但存在暂时性死区**

- `let` 声明的变量也会提升，但在声明之前无法访问，处于“暂时性死区”（Temporal Dead Zone）。

```javascript
// console.log(d); // 报错：Cannot access 'd' before initialization
let d = 40;
```

---

### **3. 重复声明**

#### **`var`：允许重复声明**

- 在同一作用域内可以多次声明同名变量，后面的声明会覆盖前面的。

```javascript
var e = 50;
var e = 60; // 不报错，后者覆盖前者
console.log(e); // 输出 60
```

#### **`let`：不允许重复声明**

- 在同一作用域内，使用 `let` 不能声明同名变量，否则会报错。

```javascript
let f = 70;
// let f = 80; // 报错：Identifier 'f' has already been declared
```

---

### **4. 全局变量的绑定**

#### **`var`：创建的全局变量会绑定到全局对象（如 `window`）**

- 在浏览器中，使用 `var` 声明的全局变量会成为 `window` 对象的属性。

```javascript
var g = 90;
console.log(window.g); // 输出 90
```

#### **`let`：不会绑定到全局对象**

- `let` 声明的全局变量是全局作用域的，但不会成为全局对象的属性。

```javascript
let h = 100;
console.log(window.h); // 输出 undefined
```

---

### **5. 循环中的作用域**

#### **`var`：没有块级作用域，循环变量作用于全局或函数作用域**

- 循环变量会在循环外部可访问。

```javascript
for (var i = 0; i < 3; i++) {
    console.log(i);
}
console.log(i); // 输出 3
```

#### **`let`：块级作用域，每次迭代变量是独立的**

- 循环变量只在当前迭代中有效。

```javascript
for (let j = 0; j < 3; j++) {
    console.log(j);
}
// console.log(j); // 报错：j 未定义
```

---

### **6. 性能与安全性**

- **`var`**：因为作用域宽松（函数作用域），容易导致意外覆盖和变量污染。
- **`let`**：作用域更加严格（块级作用域），更容易管理变量，减少错误。

---

### **总结对比表**

|特性|**`var`**|**`let`**|
|---|---|---|
|**作用域**|函数作用域|块级作用域|
|**变量提升**|声明提升，初始化为 `undefined`|声明[[JavaScript/JS基础/JS 基础语法/提升|提升]]，暂时性死区|
|**重复声明**|允许|不允许|
|**全局绑定**|绑定到全局对象（如 `window`）|不绑定到全局对象|
|**循环中的作用域**|变量在循环外部仍可访问|变量在循环外部不可访问|
|**适用场景**|适用于旧代码，但不推荐新代码使用|推荐，现代 JavaScript 开发的首选方式|

---

### **推荐使用**

- **默认使用 `let`**：声明普通变量，作用域清晰，减少变量冲突。
- **避免使用 `var`**：因其作用域和提升问题，容易导致难以排查的错误。